var app=angular.module("prodFilterApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(r,e){r.state("home",{url:"/doc/{}",controller:"prodFilterCntl"})}]),app.controller("prodFilterCntl",["$scope","$location","$http","$timeout","$q",function(r,e,t,o,n){r.objToArray=function(e,t){return r.tempArray=[],angular.forEach(e,function(e,o){e?("string"==t&&(temp=e.split("|"),r.tempArray.push(temp[0])),"id"==t&&(temp=e.split("|"),r.tempArray.push(temp[1]))):r.tempArray.splice(o,temp[1])}),r.tempArray},r.arrayToString=function(r){return tempString="",tempString=r.join(", "),""==tempString&&(tempString="All"),tempString},r.searchFilter="",r.search=function(e){r.runQuery()},r.regionArrayID=[],r.regionArrayString=[],r.regionCurrentSelected="All",r.$watchCollection("region",function(e,t){e&&(r.regionArrayID=r.objToArray(r.region,"id"),r.regionArrayString=r.objToArray(r.region,"string"),r.regionCurrentSelected=r.arrayToString(r.regionArrayString),r.runQueryDebounce())}),r.docTypeArrayID=[],r.docTypeArrayString=[],r.docTypeCurrentSelected="All",r.$watchCollection("docType",function(e,t){e&&(r.docTypeArrayID=r.objToArray(r.docType,"id"),r.docTypeArrayString=r.objToArray(r.docType,"string"),r.docTypeCurrentSelected=r.arrayToString(r.docTypeArrayString),r.runQueryDebounce())}),r.solutionArrayID=[],r.solutionArrayString=[],r.solutionCurrentSelected="All",r.$watchCollection("solution",function(e,t){e&&(r.solutionArrayID=r.objToArray(r.solution,"id"),r.solutionArrayString=r.objToArray(r.solution,"string"),r.solutionCurrentSelected=r.arrayToString(r.solutionArrayString),r.runQueryDebounce())}),r.sortItems="Newest",r.sorting=function(){r.runQuery()},$("#filterSort .customSelectC").on("click","li",function(e){var t=$(this).text();r.sortItems=t,r.runQuery()}),r.reset=function(){r.searchFilter="",r.regionArrayID=[],r.regionArrayString=[],r.regionCurrentSelected="All",r.docTypeArrayID=[],r.docTypeArrayString=[],r.docTypeCurrentSelected="All",r.solutionArrayID=[],r.solutionArrayString=[],r.solutionCurrentSelected="All",r.sortItems="Newest",r.pageNum=1,r.runQuery()},r.pageNum=1,r.runQueryDebounce=function(){o.cancel(r.mytimeout),r.mytimeout=o(function(){r.runQuery()},1e3)},r.runQuery=function(){regionParam=r.regionArrayID.join(","),""==regionParam&&(regionParam=-1),docTypeParam=r.docTypeArrayID.join(","),""==docTypeParam&&(docTypeParam=-1),solutionParam=r.solutionArrayID.join(","),""==solutionParam&&(solutionParam=-1),r.ajaxRequest="http://localhost:51872/filter/",r.ajaxRequest=r.ajaxRequest+"regions/"+regionParam,r.ajaxRequest=r.ajaxRequest+"/documents/"+docTypeParam,r.ajaxRequest=r.ajaxRequest+"/SBU/-1",r.ajaxRequest=r.ajaxRequest+"/solutions/"+solutionParam,r.ajaxRequest=r.ajaxRequest+"/sort/"+r.sortItems,r.ajaxRequest=r.ajaxRequest+"/page/"+r.pageNum,r.ajaxRequest=r.ajaxRequest+"/search/"+r.searchFilter,console.log(r.ajaxRequest),r.dataLoaded=function(){return!1},r.prodfilterResults="",t.get(r.ajaxRequest).then(function(e){r.prodfilterResults=e.data.results,r.dataLoaded=function(){return!0},r.checkForResults=function(){return null===r.prodfilterResults?!0:!1}})},r.runQuery()}]);